{"version":3,"file":"main.cf1a3f00.js","sources":["../../src/layout/main.vue"],"sourcesContent":["<script setup name=\"Layout\">\nimport Header from './components/Header/index.vue'\nimport MainSidebar from './components/MainSidebar/index.vue'\nimport SubSidebar from './components/SubSidebar/index.vue'\nimport Topbar from './components/Topbar/index.vue'\nimport Search from './components/Search/index.vue'\nimport AppSetting from './components/AppSetting/index.vue'\nimport { isExternalLink } from '@/util'\n\nconst { proxy } = getCurrentInstance()\nconst routeInfo = useRoute(), router = useRouter()\n\nimport useSettingsStore from '@/store/modules/settings'\nconst settingsStore = useSettingsStore()\nimport useKeepAliveStore from '@/store/modules/keepAlive'\nconst keepAliveStore = useKeepAliveStore()\nimport useMenuStore from '@/store/modules/menu'\nconst menuStore = useMenuStore()\n\nconst showCopyright = computed(() => {\n    return typeof routeInfo.meta.copyright !== 'undefined' ? routeInfo.meta.copyright : settingsStore.copyright.enable\n})\n\nwatch(() => settingsStore.menu.subMenuCollapse, val => {\n    if (settingsStore.mode === 'mobile') {\n        if (!val) {\n            document.querySelector('body').classList.add('hidden')\n        } else {\n            document.querySelector('body').classList.remove('hidden')\n        }\n    }\n})\n\nwatch(() => routeInfo.path, () => {\n    if (settingsStore.mode === 'mobile') {\n        settingsStore.$patch(state => {\n            state.menu.subMenuCollapse = true\n        })\n    }\n})\n\nonMounted(() => {\n    proxy.$hotkeys('f5', e => {\n        if (settingsStore.topbar.enablePageReload) {\n            e.preventDefault()\n            reload()\n        }\n    })\n})\nprovide('reload', reload)\nfunction reload() {\n    router.push({\n        name: 'reload'\n    })\n}\n\nprovide('switchMenu', switchMenu)\nfunction switchMenu(index) {\n    menuStore.setActived(index)\n    if (settingsStore.menu.switchMainMenuAndPageJump) {\n        if (isExternalLink(menuStore.sidebarMenusFirstDeepestPath)) {\n            window.open(menuStore.sidebarMenusFirstDeepestPath, '_blank')\n        } else {\n            router.push(menuStore.sidebarMenusFirstDeepestPath)\n        }\n    }\n}\n</script>\n\n<template>\n    <div class=\"layout\">\n        <div id=\"app-main\">\n            <Header />\n            <div class=\"wrapper\">\n                <div class=\"sidebar-container\" :class=\"{'show': settingsStore.mode === 'mobile' && !settingsStore.menu.subMenuCollapse}\">\n                    <MainSidebar />\n                    <SubSidebar />\n                </div>\n                <div class=\"sidebar-mask\" :class=\"{'show': settingsStore.mode === 'mobile' && !settingsStore.menu.subMenuCollapse}\" @click=\"settingsStore.toggleSidebarCollapse()\" />\n                <div class=\"main-container\" :style=\"{'padding-bottom': $route.meta.paddingBottom}\">\n                    <Topbar v-if=\"!(settingsStore.menu.menuMode === 'head' && !settingsStore.topbar.enableSidebarCollapse && !settingsStore.topbar.enableBreadcrumb)\" />\n                    <div class=\"main\">\n                        <page-main>\n                        <router-view v-slot=\"{ Component, route }\">\n                            <transition name=\"main\" mode=\"out-in\" appear>\n                                <keep-alive :include=\"keepAliveStore.list\">\n                                    <component :is=\"Component\" :key=\"route.fullPath\" />\n                                </keep-alive>\n                            </transition>\n                        </router-view>\n                        </page-main>\n                    </div>\n                    <Copyright v-if=\"showCopyright\" />\n                </div>\n            </div>\n            <el-backtop :right=\"20\" :bottom=\"20\" title=\"回到顶部\" />\n        </div>\n        <Search />\n        <AppSetting />\n    </div>\n</template>\n\n<style lang=\"scss\" scoped>\n[data-mode=\"mobile\"] {\n    .sidebar-container {\n        transform: translateX(calc((var(--g-main-sidebar-width) + var(--g-sub-sidebar-width)) * -1));\n        &.show {\n            transform: translateX(0);\n        }\n    }\n    .main-container {\n        margin-left: 0 !important;\n    }\n    &[data-menu-mode=\"single\"] {\n        .sidebar-container {\n            transform: translateX(calc(var(--g-sub-sidebar-width) * -1));\n            &.show {\n                transform: translateX(0);\n            }\n        }\n    }\n}\n.layout {\n    height: 100%;\n}\n#app-main {\n    width: 100%;\n    height: 100%;\n    margin: 0 auto;\n    transition: all 0.2s;\n}\n.wrapper {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    box-shadow: -1px 0 0 0 var(--g-box-shadow-color);\n    transition: padding-top 0.3s;\n    .sidebar-container {\n        position: fixed;\n        z-index: 1010;\n        top: 0;\n        bottom: 0;\n        display: flex;\n        transition: transform 0.3s, top 0.3s;\n        width: calc(var(--g-main-sidebar-actual-width) + var(--g-sub-sidebar-actual-width));\n    }\n    .sidebar-mask {\n        position: fixed;\n        z-index: 1000;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgb(0 0 0 / 50%);\n        backdrop-filter: blur(2px);\n        transition: all 0.2s;\n        transform: translateZ(0);\n        opacity: 0;\n        visibility: hidden;\n        &.show {\n            opacity: 1;\n            visibility: visible;\n        }\n    }\n    .main-sidebar-container:not(.main-sidebar-leave-active) + .sub-sidebar-container {\n        left: var(--g-main-sidebar-width);\n    }\n    .main-container {\n        display: flex;\n        flex-direction: column;\n        min-height: 100%;\n        margin-left: calc(var(--g-main-sidebar-actual-width) + var(--g-sub-sidebar-actual-width));\n        background-color: var(--g-main-bg);\n        transition: margin-left 0.3s, background-color 0.3s;\n        .topbar-container {\n            top: 0;\n            z-index: 998;\n        }\n        .main {\n            height: 100%;\n            flex: auto;\n            position: relative;\n            overflow: hidden;\n            transition: 0.3s;\n        }\n        .topbar-container + .main {\n            margin: var(--g-topbar-height) 0 0;\n        }\n    }\n}\nheader:not(.header-leave-active) + .wrapper {\n    padding-top: var(--g-header-height);\n    .sidebar-container {\n        top: var(--g-header-height);\n        :deep(.sidebar-logo) {\n            display: none;\n        }\n        :deep(.el-menu) {\n            padding-top: 0;\n        }\n    }\n    .main-container {\n        .topbar-container {\n            top: var(--g-header-height);\n            :deep(.tools) {\n                display: none;\n            }\n        }\n    }\n}\n\n// 主内容区动画\n.main-enter-active {\n    transition: 0.2s;\n}\n.main-leave-active {\n    transition: 0.15s;\n}\n.main-enter-from {\n    opacity: 0;\n    margin-left: -20px;\n}\n.main-leave-to {\n    opacity: 0;\n    margin-left: 20px;\n}\n</style>\n"],"names":["proxy","getCurrentInstance","routeInfo","useRoute","router","useRouter","settingsStore","useSettingsStore","keepAliveStore","useKeepAliveStore","menuStore","useMenuStore","showCopyright","computed","meta","copyright","enable","reload","push","name","watch","menu","subMenuCollapse","val","mode","document","querySelector","classList","remove","add","path","$patch","state","onMounted","$hotkeys","e","topbar","enablePageReload","preventDefault","provide","index","setActived","switchMainMenuAndPageJump","isExternalLink","sidebarMenusFirstDeepestPath","window","open"],"mappings":"itCASA,MAAAA,MAAAA,GAAAC,IACAC,EAAAC,IAAAC,EAAAC,IAGAC,EAAAC,IAEAC,EAAAC,IAEAC,EAAAC,IAEAC,EAAAC,GAAA,SACA,IAAAX,EAAAY,KAAAC,UAAAb,EAAAY,KAAAC,UAAAT,EAAAS,UAAAC,SA8BA,SAAAC,IACAb,EAAAc,KAAA,CACAC,KAAA,kBA7BAC,GAAA,IAAAd,EAAAe,KAAAC,kBAAAC,IACA,WAAAjB,EAAAkB,OACAD,EAGAE,SAAAC,cAAA,QAAAC,UAAAC,OAAA,UAFAH,SAAAC,cAAA,QAAAC,UAAAE,IAAA,cAOAT,GAAA,IAAAlB,EAAA4B,OAAA,KACA,WAAAxB,EAAAkB,MACAlB,EAAAyB,QAAAC,IACAA,EAAAX,KAAAC,iBAAA,QAKAW,GAAA,KACAjC,EAAAkC,SAAA,MAAAC,IACA7B,EAAA8B,OAAAC,mBACAF,EAAAG,iBACArB,WAIAsB,EAAA,SAAAtB,GAOAsB,EAAA,cACA,SAAAC,GACA9B,EAAA+B,WAAAD,GACAlC,EAAAe,KAAAqB,4BACAC,EAAAjC,EAAAkC,8BACAC,OAAAC,KAAApC,EAAAkC,6BAAA,UAEAxC,EAAAc,KAAAR,EAAAkC"}